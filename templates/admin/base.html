<!-- templates/admin/base.html -->
{% extends "base.html" %}

{% block title %}{% block admin_title %}管理后台{% endblock %} - iShoot8{% endblock %}

{% block content %}
<div class="container-fluid mt-3">
    <div class="row">
        <!-- Sidebar -->
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'admin_routes.admin_dashboard' %}active{% endif %}" aria-current="page" href="{{ url_for('admin_routes.admin_dashboard') }}">
                            <i class="bi bi-house-door-fill me-2"></i>
                            仪表盘
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'admin_routes.admin_settings' %}active{% endif %}" href="{{ url_for('admin_routes.admin_settings') }}">
                            <i class="bi bi-gear-fill me-2"></i>
                            网站设置
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'admin_routes.admin_data_update' %}active{% endif %}" href="{{ url_for('admin_routes.admin_data_update') }}">
                            <i class="bi bi-database-fill-up me-2"></i>
                            数据管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'admin_routes.admin_news_manage' %}active{% endif %}" href="{{ url_for('admin_routes.admin_news_manage') }}">
                            <i class="bi bi-newspaper me-2"></i>
                            新闻管理
                        </a>
                    </li>
                </ul>

                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>其他操作</span>
                </h6>
                <ul class="nav flex-column mb-2">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('admin_routes.admin_logout') }}">
                            <i class="bi bi-box-arrow-right me-2"></i>
                            退出登录
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            {% block admin_content %}{% endblock %}
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }} {# 确保继承父模板的脚本 #}
    <!-- Admin specific scripts if any -->
    <script>
        // Example: Toggle sidebar on smaller screens
        // var sidebarToggle = document.querySelector('.navbar-toggler');
        // var sidebar = document.getElementById('sidebarMenu');
        // sidebarToggle.addEventListener('click', function() {
        //     sidebar.classList.toggle('show');
        // });
    </script>
{% endblock %}

{% block styles %}
    {{ super() }} {# 确保继承父模板的样式 #}
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100; /* Behind the navbar */
            padding: 48px 0 0; /* Height of navbar */
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
        }

        @media (max-width: 767.98px) {
            .sidebar {
                top: 5rem; /* Adjust for navbar height on mobile */
            }
        }

        .sidebar-sticky {
            height: calc(100vh - 48px);
            overflow-x: hidden;
            overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
        }

        .sidebar .nav-link {
            font-weight: 500;
            color: #333;
        }

        .sidebar .nav-link .feather {
            margin-right: 4px;
            color: #999;
        }

        .sidebar .nav-link.active {
            color: #007bff;
        }

        .sidebar .nav-link:hover .feather,
        .sidebar .nav-link.active .feather {
            color: inherit;
        }

        .sidebar-heading {
            font-size: .75rem;
            text-transform: uppercase;
        }

        main {
            padding-top: 48px; /* Adjust for fixed navbar */
        }
        @media (min-width: 768px) {
            main {
                margin-left: 16.666667%; /* Adjust for sidebar width */
            }
        }
    </style>
{% endblock %}
